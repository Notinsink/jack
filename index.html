<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Balance</title>
  <style>
    :root {
      --primary: #2b2b2b;
      --background: #f9f9f9;
      --accent: #007bff;
      --text: #222;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--background);
      color: var(--text);
      padding: 20px;
      margin: 0;
    }

    header {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
    }

    .tagline {
      text-align: center;
      color: gray;
      margin-bottom: 30px;
    }

    select, input, button {
      padding: 8px;
      margin: 5px;
      font-size: 1em;
    }

    .section {
      margin: 20px 0;
    }

    .list {
      margin-top: 10px;
    }

    .list div {
      display: flex;
      justify-content: space-between;
      margin: 3px 0;
      padding: 4px;
      background: #e9e9e9;
    }

    .theme-selector {
      float: right;
    }

    .balance {
      font-weight: bold;
      font-size: 1.2em;
      margin-top: 20px;
    }

    button {
      background-color: var(--accent);
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.9;
    }

    .remove-btn {
      background-color: red;
      padding: 2px 8px;
      font-size: 0.9em;
      margin-left: 10px;
    }

    .footer {
      margin-top: 30px;
      text-align: center;
      font-size: 0.9em;
      color: gray;
    }
  </style>
</head>
<body>
  <header>Balance</header>
  <div class="tagline">Track your income, expenses, assets & liabilities</div>

  <div class="theme-selector">
    Theme:
    <select onchange="changeTheme(this.value)">
      <option value="light">Light</option>
      <option value="dark">Dark</option>
      <option value="blue">Blue</option>
    </select>
  </div>

  <div>
    Currency:
    <select id="currency">
      <option value="$">Dollar ($)</option>
      <option value="€">Euro (€)</option>
      <option value="₦">Naira (₦)</option>
    </select>
  </div>

  <div class="section">
    <h3>Income</h3>
    <input type="text" id="incomeName" placeholder="Source" />
    <input type="number" id="incomeAmount" placeholder="Amount" />
    <button onclick="addItem('income')">Add</button>
    <div class="list" id="incomeList"></div>
  </div>

  <div class="section">
    <h3>Expenses</h3>
    <input type="text" id="expenseName" placeholder="Item" />
    <input type="number" id="expenseAmount" placeholder="Amount" />
    <button onclick="addItem('expense')">Add</button>
    <div class="list" id="expenseList"></div>
  </div>

  <div class="section">
    <h3>Assets</h3>
    <input type="text" id="assetName" placeholder="Asset" />
    <input type="number" id="assetAmount" placeholder="Value" />
    <button onclick="addItem('asset')">Add</button>
    <div class="list" id="assetList"></div>
  </div>

  <div class="section">
    <h3>Liabilities</h3>
    <input type="text" id="liabilityName" placeholder="Liability" />
    <input type="number" id="liabilityAmount" placeholder="Value" />
    <button onclick="addItem('liability')">Add</button>
    <div class="list" id="liabilityList"></div>
  </div>

  <div class="balance" id="balanceDisplay">Net Balance: 0</div>

  <button onclick="saveData()">Save</button>
  <button onclick="exportData()">Export Balance Sheet</button>

  <div class="footer">Made with love by you</div>

  <script>
    let incomeList = [];
    let expenseList = [];
    let assetList = [];
    let liabilityList = [];

    const currencySelector = document.getElementById("currency");

    function addItem(type) {
      const name = document.getElementById(type + "Name").value;
      const amount = parseFloat(document.getElementById(type + "Amount").value);

      if (!name || isNaN(amount)) return;

      const item = { name, amount };
      if (type === "income") incomeList.push(item);
      if (type === "expense") expenseList.push(item);
      if (type === "asset") assetList.push(item);
      if (type === "liability") liabilityList.push(item);

      renderList(type);
      updateBalance();
    }

    function renderList(type) {
      const container = document.getElementById(type + "List");
      let list = [];
      if (type === "income") list = incomeList;
      if (type === "expense") list = expenseList;
      if (type === "asset") list = assetList;
      if (type === "liability") list = liabilityList;

      container.innerHTML = "";
      list.forEach((item, index) => {
        container.innerHTML += `
          <div>
            ${item.name}: ${item.amount} ${currencySelector.value}
            <button class="remove-btn" onclick="removeItem('${type}', ${index})">x</button>
          </div>
        `;
      });
    }

    function removeItem(type, index) {
      if (type === "income") incomeList.splice(index, 1);
      if (type === "expense") expenseList.splice(index, 1);
      if (type === "asset") assetList.splice(index, 1);
      if (type === "liability") liabilityList.splice(index, 1);

      renderList(type);
      updateBalance();
    }

    function calculateNetBalance() {
      const incomeTotal = incomeList.reduce((sum, item) => sum + item.amount, 0);
      const expenseTotal = expenseList.reduce((sum, item) => sum + item.amount, 0);
      const assetTotal = assetList.reduce((sum, item) => sum + item.amount, 0);
      const liabilityTotal = liabilityList.reduce((sum, item) => sum + item.amount, 0);
      return incomeTotal - expenseTotal + assetTotal - liabilityTotal;
    }

    function updateBalance() {
      const net = calculateNetBalance();
      document.getElementById("balanceDisplay").innerText =
        `Net Balance: ${net} ${currencySelector.value}`;
    }

    function saveData() {
      const data = {
        incomeList,
        expenseList,
        assetList,
        liabilityList,
        currency: currencySelector.value
      };
      localStorage.setItem("balanceApp", JSON.stringify(data));
      alert("Saved!");
    }

    function loadData() {
      const data = JSON.parse(localStorage.getItem("balanceApp"));
      if (!data) return;
      incomeList = data.incomeList || [];
      expenseList = data.expenseList || [];
      assetList = data.assetList || [];
      liabilityList = data.liabilityList || [];
      currencySelector.value = data.currency || "$";
      ["income", "expense", "asset", "liability"].forEach(renderList);
      updateBalance();
    }

    function exportData() {
      let content = "=== Balance Sheet ===\n\n";

      content += "Income:\n";
      incomeList.forEach(item => {
        content += `- ${item.name}: ${item.amount} ${currencySelector.value}\n`;
      });

      content += "\nExpenses:\n";
      expenseList.forEach(item => {
        content += `- ${item.name}: ${item.amount} ${currencySelector.value}\n`;
      });

      content += "\nAssets:\n";
      assetList.forEach(item => {
        content += `- ${item.name}: ${item.amount} ${currencySelector.value}\n`;
      });

      content += "\nLiabilities:\n";
      liabilityList.forEach(item => {
        content += `- ${item.name}: ${item.amount} ${currencySelector.value}\n`;
      });

      content += `\nNet Balance: ${calculateNetBalance()} ${currencySelector.value}`;

      const blob = new Blob([content], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = "balance_sheet.txt";
      link.click();
    }

    function changeTheme(theme) {
      const root = document.documentElement;
      if (theme === "dark") {
        root.style.setProperty("--background", "#1e1e1e");
        root.style.setProperty("--text", "#ffffff");
        root.style.setProperty("--accent", "#4caf50");
      } else if (theme === "blue") {
        root.style.setProperty("--background", "#e0f0ff");
        root.style.setProperty("--text", "#003366");
        root.style.setProperty("--accent", "#007bff");
      } else {
        root.style.setProperty("--background", "#f9f9f9");
        root.style.setProperty("--text", "#222");
        root.style.setProperty("--accent", "#007bff");
      }
    }

    window.onload = loadData;
  </script>
</body>
</html>
